<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Coach Mission Control</title>
    <link rel="stylesheet" href="css/common-gray.css">
    <link rel="stylesheet" href="css/coach-gray.css">
    <style>
        /* Method Info Panel */
        .method-info-panel {
            background: #3b82f6;
            color: white;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            display: none;
        }
        
        .method-info-panel.active {
            display: flex;
            justify-content: space-between;
        }
        
        /* Admin Dashboard Styles */
        .admin-dashboard {
            padding: 30px;
            background: #f8fafc;
            border-radius: 12px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .dashboard-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #3b82f6;
        }
        
        .dashboard-card h3 {
            margin: 0 0 15px 0;
            color: #1f2937;
            font-size: 1.2rem;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #3b82f6;
            margin: 10px 0;
        }
        
        .method-performance {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .method-performance:last-child {
            border-bottom: none;
        }
        
        .performance-bar {
            width: 60px;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .performance-fill {
            height: 100%;
            background: #3b82f6;
            transition: width 0.3s ease;
        }
        
        .calendar-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .calendar-item:last-child {
            border-bottom: none;
        }
        
        .calendar-time {
            font-weight: 600;
            color: #3b82f6;
            font-size: 0.9rem;
        }
        
        .revenue-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .revenue-item:last-child {
            border-bottom: none;
        }
        
        .revenue-amount {
            font-weight: bold;
            color: #10b981;
        }
        
        .admin-action-btn {
            width: 100%;
            margin-bottom: 10px;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s ease;
        }
        
        .admin-action-btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-primary { background: #3b82f6; color: white; }
        .btn-success { background: #10b981; color: white; }
        .btn-warning { background: #f59e0b; color: white; }
        .btn-secondary { background: #6b7280; color: white; }
    </style>
</head>
<body>
    <!-- Method Info Panel (wird bei URL-Parametern angezeigt) -->
    <div id="methodInfoPanel" class="method-info-panel">
        <div>üéØ <strong>Aktive Methode:</strong> <span id="activeMethod">Systemisches Coaching</span></div>
        <div>üë§ <strong>Demo-Klient:</strong> <span id="demoClient">Lisa M√ºller</span></div>
    </div>

    <div class="container">
        <h1>üéØ Coach Mission Control</h1>
        
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="clients">üë• Klienten</button>
            <button class="tab-btn" data-tab="coaching">üéØ Coaching</button>
            <button class="tab-btn" data-tab="collaboration">ü§ù Kollaboration</button>
            <button class="tab-btn" data-tab="coachki">üß† Coach-KI</button>
            <button class="tab-btn" data-tab="admin">üìä Admin Dashboard</button>
        </div>

        <!-- Klienten Tab (ORIGINAL FUNKTIONIEREND) -->
        <div id="clientsTab" class="tab-content active">
            <h2 style="margin-bottom: 25px; color: #1e293b;">üë• Klienten ausw√§hlen</h2>
            <div class="clients-container" id="clientsContainer">
                <!-- Klienten werden hier geladen -->
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button id="startSessionBtn" class="start-session-btn" onclick="startSession()" style="display: none;">
                    üöÄ Session starten
                </button>
            </div>
        </div>

        <!-- Coaching Tab (ORIGINAL FUNKTIONIEREND) -->
        <div id="coachingTab" class="tab-content">
            <div class="coaching-layout">
                <div class="prompt-repository">
                    <h3 style="margin-bottom: 20px; color: #1e293b;">üß∞ Prompt Repository</h3>
                    <div class="stats">
                        <strong id="promptStats">Prompts verf√ºgbar: 0</strong>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Filter nach Kategorie:</label>
                        <select id="categoryFilter" style="width: 100%; padding: 10px; border: 2px solid #e2e8f0; border-radius: 8px; margin-bottom: 15px;">
                            <option value="">Alle Kategorien</option>
                        </select>
                    </div>
                    <div class="prompts-container" id="promptsContainer">
                        <!-- Prompts werden hier geladen -->
                    </div>
                </div>

                <div class="prompt-editor">
                    <h3 style="margin-bottom: 20px; color: #1e293b;">‚úèÔ∏è Prompt Editor</h3>
                    <textarea id="promptEditor" placeholder="W√§hlen Sie einen Prompt aus dem Repository oder geben Sie einen eigenen ein..."></textarea>
                    <div class="editor-actions">
                        <button class="send-btn" onclick="sendToCollaboration()">üì§ An Coachee senden</button>
                        <button class="send-btn" onclick="openCollaborationWindow()">üîó Kollaborations-Fenster √∂ffnen</button>
                        <button onclick="clearEditor()" style="background: #6b7280; color: white;">üóëÔ∏è Leeren</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Kollaboration Tab (ORIGINAL FUNKTIONIEREND) -->
        <div id="collaborationTab" class="tab-content">
            <h2 style="margin-bottom: 25px; color: #1e293b;">ü§ù Kollaboration Monitor</h2>
            <div class="collaboration-monitor">
                <div class="monitor-header">
                    <span>Status: <span id="connectionStatus">Bereit</span></span>
                    <button onclick="openCollaborationWindow()" class="open-collab-btn">
                        üîó Kollaborations-Fenster √∂ffnen
                    </button>
                </div>
                <div class="collaboration-messages" id="collaborationMessages">
                    <div style="text-align: center; color: #64748b; padding: 40px;">
                        Hier sehen Sie den Dialog zwischen Coach und Coachee.<br>
                        √ñffnen Sie das Kollaborations-Fenster f√ºr den Coachee.
                    </div>
                </div>
                <div id="collaborationActions" style="display: none;">
                    <!-- Aktionen werden hier angezeigt -->
                </div>
            </div>
        </div>

        <!-- Coach-KI Tab (ORIGINAL FUNKTIONIEREND) -->
        <div id="coachkiTab" class="tab-content">
            <div class="coachki-container">
                <h2 style="color: #1e293b; margin-bottom: 25px; display: flex; align-items: center;">
                    üß† Coach-KI Kommunikation
                    <span style="background: #fef3c7; color: #92400e; padding: 0.5rem 1rem; border-radius: 12px; font-size: 0.9rem; margin-left: 15px;">Prozess & Methoden</span>
                </h2>
                
                <div class="quick-access">
                    <button onclick="loadProcessSupport()" class="quick-btn process">
                        ‚öôÔ∏è Prozess-Support
                    </button>
                    <button onclick="loadMethodenBeratung()" class="quick-btn methods">
                        üõ†Ô∏è Methoden-Beratung
                    </button>
                    <button onclick="loadInterventionshilfe()" class="quick-btn intervention">
                        üéØ Interventionshilfe
                    </button>
                    <button onclick="loadNotfallSupport()" class="quick-btn emergency">
                        üö® Notfall-Support
                    </button>
                </div>

                <div class="coach-input-section">
                    <label class="input-label">
                        üí¨ Coaching-Situation beschreiben:
                    </label>
                    <textarea id="coachInput" placeholder="Beschreiben Sie Ihre aktuelle Coaching-Situation, Herausforderung oder methodische Frage..."></textarea>
                </div>

                <div class="context-grid">
                    <div>
                        <label class="context-label">Session-Phase:</label>
                        <select id="sessionPhase" class="context-select">
                            <option>Phase 1: Problem & Ziel</option>
                            <option>Phase 2: Analyse</option>
                            <option>Phase 3: L√∂sung</option>
                            <option>Phase 4: Umsetzung</option>
                            <option>Meta: Prozessreflexion</option>
                        </select>
                    </div>
                    <div>
                        <label class="context-label">Coachee-Typ:</label>
                        <select id="coacheeType" class="context-select">
                            <option>F√ºhrungskraft</option>
                            <option>Entrepreneur</option>
                            <option>√úbergangsphase</option>
                            <option>Team/Gruppe</option>
                            <option>Paar</option>
                        </select>
                    </div>
                    <div>
                        <label class="context-label">Dringlichkeit:</label>
                        <select id="urgency" class="context-select">
                            <option>Normal</option>
                            <option>Live-Support</option>
                            <option>Notfall</option>
                        </select>
                    </div>
                </div>

                <div class="action-buttons">
                    <button onclick="askCoachKI()" class="ask-ki-btn">
                        üß† Coach-KI fragen
                    </button>
                    <button onclick="clearCoachInput()" class="clear-btn">
                        üóëÔ∏è Leeren
                    </button>
                </div>

                <div id="coachKIResponse" class="ki-response" style="display: none;">
                    <h3 class="response-header">
                        ü§ñ Coach-KI Empfehlung
                        <span id="responseCategory" class="response-category"></span>
                    </h3>
                    <div id="coachKIResponseContent" class="response-content"></div>
                    
                    <div id="followUpActions" class="follow-up-actions" style="display: none;">
                        <button onclick="implementSuggestion()" class="follow-up-btn implement">
                            ‚úÖ Umsetzen
                        </button>
                        <button onclick="getAlternativeAdvice()" class="follow-up-btn alternative">
                            üîÑ Alternative
                        </button>
                        <button onclick="deepDive()" class="follow-up-btn deep-dive">
                            üîç Vertiefen
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEUES Admin Dashboard Tab -->
        <div id="adminTab" class="tab-content">
            <div class="admin-dashboard">
                <h2>üìä Admin Dashboard</h2>
                
                <div class="dashboard-grid">
                    <!-- Klienten-Statistiken -->
                    <div class="dashboard-card">
                        <h3>üë• Klienten-√úbersicht</h3>
                        <div class="stat-number" id="totalClients">10</div>
                        <p>Gesamt-Klienten</p>
                        <div style="margin-top: 15px;">
                            <div class="method-performance">
                                <span>Aktive Klienten</span>
                                <strong id="activeClients">8</strong>
                            </div>
                            <div class="method-performance">
                                <span>Neue diese Woche</span>
                                <strong id="newClients">3</strong>
                            </div>
                            <div class="method-performance">
                                <span>Demo-Klienten</span>
                                <strong id="demoClients">5</strong>
                            </div>
                        </div>
                    </div>

                    <!-- Session-Statistiken -->
                    <div class="dashboard-card">
                        <h3>üìà Session-Statistiken</h3>
                        <div class="stat-number" id="totalSessions">47</div>
                        <p>Sessions diesen Monat</p>
                        <div style="margin-top: 15px;">
                            <div class="method-performance">
                                <span>Diese Woche</span>
                                <strong>12</strong>
                            </div>
                            <div class="method-performance">
                                <span>Durchschnitt/Tag</span>
                                <strong>2.1</strong>
                            </div>
                            <div class="method-performance">
                                <span>Erfolgsrate</span>
                                <strong>94%</strong>
                            </div>
                        </div>
                    </div>

                    <!-- Method-Performance -->
                    <div class="dashboard-card">
                        <h3>üéØ Method-Performance</h3>
                        <div class="method-performance">
                            <span>üîÑ Systemisches Coaching</span>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 85%"></div>
                            </div>
                            <span>85%</span>
                        </div>
                        <div class="method-performance">
                            <span>üí° L√∂sungsorientiert</span>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 78%"></div>
                            </div>
                            <span>78%</span>
                        </div>
                        <div class="method-performance">
                            <span>üéØ Werte & Sinn</span>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 92%"></div>
                            </div>
                            <span>92%</span>
                        </div>
                        <div class="method-performance">
                            <span>üé≠ Gestalt</span>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 71%"></div>
                            </div>
                            <span>71%</span>
                        </div>
                        <div class="method-performance">
                            <span>üß† KI-Coaching</span>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 89%"></div>
                            </div>
                            <span>89%</span>
                        </div>
                        <div class="method-performance">
                            <span>üí™ Ressourcenorientiert</span>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 83%"></div>
                            </div>
                            <span>83%</span>
                        </div>
                    </div>

                    <!-- Terminkalender -->
                    <div class="dashboard-card">
                        <h3>üìÖ Heutige Termine</h3>
                        <div class="calendar-item">
                            <div>
                                <div><strong>Lisa M√ºller</strong></div>
                                <div style="font-size: 0.9rem; color: #6b7280;">Systemisches Coaching</div>
                            </div>
                            <div class="calendar-time">09:00</div>
                        </div>
                        <div class="calendar-item">
                            <div>
                                <div><strong>Marcus Weber</strong></div>
                                <div style="font-size: 0.9rem; color: #6b7280;">L√∂sungsorientiert</div>
                            </div>
                            <div class="calendar-time">11:15</div>
                        </div>
                        <div class="calendar-item">
                            <div>
                                <div><strong>Sarah Klein</strong></div>
                                <div style="font-size: 0.9rem; color: #6b7280;">Werte & Sinn</div>
                            </div>
                            <div class="calendar-time">14:30</div>
                        </div>
                        <div class="calendar-item">
                            <div>
                                <div><strong>Thomas M√ºller</strong></div>
                                <div style="font-size: 0.9rem; color: #6b7280;">Gestalt-Coaching</div>
                            </div>
                            <div class="calendar-time">16:00</div>
                        </div>
                    </div>

                    <!-- Abrechnungen -->
                    <div class="dashboard-card">
                        <h3>üí∞ Abrechnungen</h3>
                        <div class="stat-number" id="monthlyRevenue">‚Ç¨3.240</div>
                        <p>Umsatz diesen Monat</p>
                        <div style="margin-top: 15px;">
                            <div class="revenue-item">
                                <span>Sessions (47x ‚Ç¨80)</span>
                                <span class="revenue-amount">‚Ç¨3.760</span>
                            </div>
                            <div class="revenue-item">
                                <span>Stornierungen (-2x ‚Ç¨80)</span>
                                <span style="color: #ef4444;">-‚Ç¨160</span>
                            </div>
                            <div class="revenue-item">
                                <span>Bonus-Sessions (8x ‚Ç¨20)</span>
                                <span class="revenue-amount">‚Ç¨160</span>
                            </div>
                            <div class="revenue-item" style="border-top: 2px solid #3b82f6; font-weight: bold;">
                                <span>Gesamt-Umsatz</span>
                                <span class="revenue-amount">‚Ç¨3.760</span>
                            </div>
                        </div>
                    </div>

                    <!-- Klientenverwaltung -->
                    <div class="dashboard-card">
                        <h3>üóÇÔ∏è Schnell-Aktionen</h3>
                        <button onclick="showAddClientModal()" class="admin-action-btn btn-primary">
                            ‚ûï Neuen Klient hinzuf√ºgen
                        </button>
                        <button onclick="exportClientData()" class="admin-action-btn btn-success">
                            üìä Daten exportieren
                        </button>
                        <button onclick="generateReport()" class="admin-action-btn btn-warning">
                            üìã Monats-Report
                        </button>
                        <button onclick="backupData()" class="admin-action-btn btn-secondary">
                            üíæ Backup erstellen
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ORIGINAL JAVASCRIPT IMPORTS (DEINE FUNKTIONIERENDE BASIS) -->
    <script src="data/prompts.js"></script>
    <script src="data/clients.js"></script>
    <script>
// DEMO-KLIENTEN DIREKT HINZUF√úGEN
document.addEventListener('DOMContentLoaded', function() {
    const demoClients = [
        {
            id: 'demo-1',
            name: "Marcus Weber",
            age: 45,
            profession: "F√ºhrungskraft",  
            topics: ["L√∂sungsorientierung", "Entscheidungsfindung"],
            method: 'solution',
            isDemo: true
        },
        {
            id: 'demo-2',
            name: "Sarah Klein", 
            age: 38,
            profession: "Managerin",
            topics: ["Werte", "Sinnorientierung"],
            method: 'values',
            isDemo: true
        },
        {
            id: 'demo-3',
            name: "Thomas M√ºller",
            age: 41,
            profession: "Team Lead", 
            topics: ["Gestalt", "Erlebnisorientierung"],
            method: 'gestalt',
            isDemo: true
        },
        {
            id: 'demo-4',
            name: "Anna Schmidt",
            age: 33,
            profession: "Beraterin",
            topics: ["KI-Coaching", "Triadisch"], 
            method: 'triadic',
            isDemo: true
        },
        {
            id: 'demo-5',
            name: "Lisa M√ºller",
            age: 36,
            profession: "Projektleiterin",
            topics: ["Systemisches Coaching", "Beziehungen"],
            method: 'systemic', 
            isDemo: true
        }
    ];
    
    // Demo-Klienten hinzuf√ºgen
    if (typeof window.clients !== 'undefined') {
        window.clients = [...window.clients, ...demoClients];
    } else {
        window.clients = demoClients;
    }
    
    console.log('üéØ DEMO-KLIENTEN HINZUGEF√úGT:', demoClients.length);
    
    // Klienten-Anzeige neu laden falls bereits geladen
    if (typeof renderClients === 'function') {
        renderClients();
    }
});
</script>
    <script src="js/communication.js"></script>
    <script src="js/common.js"></script>
    <script src="js/coach.js"></script>
    
    <script>
        // URL-Parameter f√ºr Method Info Panel
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const client = urlParams.get('client');
            const method = urlParams.get('method');
            
            if (client && method) {
                // Method Info Panel anzeigen
                const panel = document.getElementById('methodInfoPanel');
                const methodSpan = document.getElementById('activeMethod');
                const clientSpan = document.getElementById('demoClient');
                
                const methodNames = {
                    'systemic': 'Systemisches Coaching',
                    'solution': 'L√∂sungsorientiertes Coaching',
                    'values': 'Werte- & Sinnorientiertes Coaching',
                    'gestalt': 'Gestalt-/Erlebnisorientiertes Coaching',
                    'triadic': 'Triadisches KI-Coaching',
                    'resource': 'Ressourcenorientiertes Coaching'
                };
                
                const clientNames = {
                    'demo-1': 'Marcus Weber',
                    'demo-2': 'Sarah Klein',
                    'demo-3': 'Thomas M√ºller',
                    'demo-4': 'Anna Schmidt',
                    'demo-5': 'Lisa M√ºller'
                };
                
                methodSpan.textContent = methodNames[method] || 'Systemisches Coaching';
                clientSpan.textContent = clientNames[client] || 'Lisa M√ºller';
                panel.classList.add('active');
                
                console.log('üéØ Demo-Modus aktiviert:', methodNames[method], 'mit', clientNames[client]);
            }
        });
        
        // Admin Dashboard Funktionen
        function showAddClientModal() {
            alert('Neuen Klient hinzuf√ºgen - Feature kommt in Vollversion!');
        }
        
        function exportClientData() {
            alert('Daten werden exportiert - Feature kommt in Vollversion!');
        }
        
        function generateReport() {
            alert('Monats-Report wird generiert - Feature kommt in Vollversion!');
        }
        
        function backupData() {
            alert('Backup wird erstellt - Feature kommt in Vollversion!');
        }
        
        console.log('üéØ Coach Mission Control geladen mit Admin Dashboard!');
        console.log('üìä 5 Tabs verf√ºgbar: Klienten, Coaching, Kollaboration, Coach-KI, Admin Dashboard');
    </script>
</body>
</html>
